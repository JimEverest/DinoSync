# Dinox API v0.2.0 Release Summary

**Release Date:** October 22, 2025  
**Version:** 0.2.0  
**PyPI Package:** https://pypi.org/project/dinox-api/0.2.0/  
**Status:** ‚úÖ Successfully Published

---

## üéâ Major Improvements

### 1. ‚ú® Automatic Server Routing (New Feature)

**Problem Solved:**  
Previously, users had to manually choose between two API servers based on which method they wanted to call, leading to confusion and 404 errors.

**Solution Implemented:**
- Automatic server routing based on method called
- Maintains separate sessions for each server for optimal performance
- Fully backward compatible with manual server selection

**Usage Example:**
```python
# v0.2.0+ Automatic routing (No manual server selection needed!)
async with DinoxClient(api_token="YOUR_TOKEN") as client:
    # Automatically uses Note Server
    notes = await client.get_notes_list()
    
    # Automatically uses AI Server
    results = await client.search_notes(["keyword"])
    boxes = await client.get_zettelboxes()
```

**Technical Details:**
- Added `METHOD_SERVER_MAP` dictionary mapping methods to servers
- Modified `_request()` method to automatically select correct server
- Maintains backward compatibility with `auto_route=False` option

---

### 2. üêõ Windows UTF-8 Encoding Fixes

**Problem Solved:**  
Windows users experienced Unicode encoding errors when displaying Chinese characters and special symbols.

**Solution Implemented:**
- Added UTF-8 encoding declaration to all Python files
- Implemented automatic stdout/stderr reconfiguration for Windows
- Fixed console encoding issues in all scripts

**Changes Made:**
```python
# Added to dinox_client.py
if sys.platform == 'win32':
    try:
        if hasattr(sys.stdout, 'reconfigure'):
            sys.stdout.reconfigure(encoding='utf-8')
            sys.stderr.reconfigure(encoding='utf-8')
    except (AttributeError, io.UnsupportedOperation):
        pass
```

**Test Results:**
- Successfully created notes with Chinese characters: ‚úÖ
- Special characters (√©mojis, accents) working: ‚úÖ
- Console output displaying correctly on Windows: ‚úÖ

---

### 3. üì¶ Version Information

**Problem Solved:**  
No way to programmatically check the library version.

**Solution Implemented:**
- Added `__version__` attribute to module
- Updated all version references to 0.2.0
- Accessible via `dinox_client.__version__`

**Usage:**
```python
import dinox_client
print(f"Using dinox-api version: {dinox_client.__version__}")
# Output: Using dinox-api version: 0.2.0
```

---

### 4. üìö Comprehensive API Documentation

**Problem Solved:**  
README lacked detailed API reference documentation.

**Solution Implemented:**
- Added complete API reference section with 8 methods documented
- Included parameters, return types, and examples for each method
- Added DinoxClient and DinoxConfig class documentation

**Documentation Includes:**
- Class definitions with all parameters
- Method signatures with type hints
- Parameter descriptions
- Return value documentation
- Real-world usage examples for each method
- Error handling guidelines

---

## üß™ Testing Results

### Real API Token Testing

All tests performed with actual API credentials:

**Test Results:**
- ‚úÖ Automatic routing working correctly
- ‚úÖ Note Server methods: `get_notes_list()` - 7 days of notes retrieved
- ‚úÖ AI Server methods: `search_notes()` - 67,152 chars returned
- ‚úÖ AI Server methods: `get_zettelboxes()` - 0 boxes (expected)
- ‚úÖ AI Server methods: `create_note()` - Successfully created
- ‚úÖ UTF-8 encoding test passed (Chinese + emojis)
- ‚úÖ Backward compatibility maintained

**Performance Metrics:**
- 4 mixed operations (different servers): 3.47 seconds
- Average time per operation: 0.87 seconds
- Session management working efficiently

---

## üìù Files Modified

### Core Library Files
1. **dinox_client.py** - Major changes
   - Added `__version__ = "0.2.0"`
   - Added Windows encoding fixes
   - Added server URL constants
   - Added METHOD_SERVER_MAP for routing
   - Modified `__init__()` to support auto_route
   - Modified `connect()` and `close()` for dual sessions
   - Modified `_request()` for automatic routing
   - Updated all API methods to set `_current_method`

### Configuration Files
2. **setup.py** - Version updated to 0.2.0
3. **pyproject.toml** - Version updated to 0.2.0

### Documentation Files
4. **README.md** - Major updates
   - Added v0.2.0 feature highlights
   - Added automatic routing documentation
   - Added complete API reference (8 methods)
   - Added usage examples

5. **CHANGELOG.md** - Added v0.2.0 release notes
   - New features documented
   - Bug fixes listed
   - Documentation improvements noted

---

## üöÄ PyPI Publication

**Publication Status:** ‚úÖ Successfully Published

**Package Details:**
- Package Name: `dinox-api`
- Version: `0.2.0`
- Upload Date: October 22, 2025
- Wheel Size: 39.8 KB
- Source Distribution: 43.7 KB
- Installation: `pip install dinox-api==0.2.0`

**PyPI Link:** https://pypi.org/project/dinox-api/0.2.0/

**Build Output:**
- Successfully built: `dinox_api-0.2.0.tar.gz`
- Successfully built: `dinox_api-0.2.0-py3-none-any.whl`
- Upload Status: 200 OK for both distributions

---

## üîÑ Migration Guide for Existing Users

### If you're upgrading from v0.1.0:

**Good News:** Your existing code will continue to work without changes!

**To use new automatic routing:**
```python
# Old way (still works)
config = DinoxConfig(
    api_token="TOKEN",
    base_url="https://aisdk.chatgo.pro"  # Manual selection
)
async with DinoxClient(config=config) as client:
    results = await client.search_notes(["keyword"])

# New way (recommended)
async with DinoxClient(api_token="TOKEN") as client:
    # Automatically routed to correct server
    results = await client.search_notes(["keyword"])
```

**To disable automatic routing:**
```python
config = DinoxConfig(
    api_token="TOKEN",
    auto_route=False  # Disable new feature
)
```

---

## üìä Version Comparison

| Feature | v0.1.0 | v0.2.0 |
|---------|--------|--------|
| Manual server selection | ‚úÖ | ‚úÖ |
| Automatic server routing | ‚ùå | ‚úÖ |
| Version attribute | ‚ùå | ‚úÖ |
| Windows UTF-8 support | ‚ö†Ô∏è Partial | ‚úÖ Full |
| API documentation | ‚ö†Ô∏è Basic | ‚úÖ Complete |
| Backward compatible | N/A | ‚úÖ Yes |

---

## üéØ What This Means for Users

### For New Users:
- ‚úÖ Simpler API - no need to understand dual-server architecture
- ‚úÖ Fewer errors - automatic routing prevents 404 errors
- ‚úÖ Better documentation - comprehensive API reference available
- ‚úÖ Cross-platform support - works on Windows without encoding issues

### For Existing Users:
- ‚úÖ No breaking changes - all existing code continues to work
- ‚úÖ Optional upgrade - can enable auto-routing when ready
- ‚úÖ Performance improvement - dual sessions for better concurrency
- ‚úÖ Better debugging - version info available for troubleshooting

---

## üôè Acknowledgments

Special thanks for:
- Providing the real API token for comprehensive testing
- Identifying the Windows encoding issues
- Requesting the automatic server routing feature
- Suggesting API documentation improvements

---

## üìû Support

- **PyPI Package:** https://pypi.org/project/dinox-api/
- **Installation:** `pip install --upgrade dinox-api`
- **Documentation:** See README.md for complete API reference
- **Issues:** Report at GitHub repository

---

**üéâ Version 0.2.0 is now live on PyPI and ready for production use!**
